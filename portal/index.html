<!DOCTYPE html>
<html lang="en-US">


  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/main.css">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Sound’s World Staff Portal. | soundsworld.ga</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Sound’s World Staff Portal. | soundsworld.ga" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A growing community of 80 thousand people." />
<meta property="og:description" content="A growing community of 80 thousand people." />
<link rel="canonical" href="http://soundsworld.ga/" />
<meta property="og:url" content="http://soundsworld.ga/" />
<meta property="og:site_name" content="soundsworld.ga" />
<script type="application/ld+json">
{"headline":"This is a website used for the staff of Sound’s World.","@type":"WebSite","url":"http://soundsworld.ga/","name":"Sound's World","description":"A growing community of 80 thousand people.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="#"></a>
		<a id="role_banner">Hello</a>

	<h1 id="project_title">Sound's World</h1>
          <h2 id="project_tagline">A growing community of 80 thousand people.</h2>
<nav id="top_nav">
	
		</nav>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
	<div id="info">
  
  </div>
  <script>
		function generateRandomString() {
			const rand = Math.floor(Math.random() * 10);
			let randStr = '';

			for (let i = 0; i < 20 + rand; i++) {
				randStr += String.fromCharCode(33 + Math.floor(Math.random() * 94));
			}

			return randStr;
		}

		window.onload = async() => {
  async function checkUser() {

   let storage = window.localStorage;
			
let id = await storage.getItem("id");
   let cUser = await storage.getItem("user");
			let uId;
			if (id && cUser) {
        uId = id;		
        console.log(uId);
        console.log(cUser);
document.getElementById('forkme_banner').innerText = `Welcome ${cUser}`;
			}else{
			
	const fragment = new URLSearchParams(window.location.hash.slice(1));

    
    if (!fragment.has("access_token")) {
    window.location.href = "http://soundsportal.gq";
        return;
    }else{
     document.getElementById('forkme_banner').innerText = `Loading....`;

        const accessToken = fragment.get("access_token");
        const tokenType = fragment.get("token_type");
	 
        let res = await fetch('https://discordapp.com/api/users/@me', {
            headers: {
                authorization: `${tokenType} ${accessToken}`
            }
        })
      let response = await res.json()
                console.log(response);
                const { username, discriminator, id } = response;
uId = id;
document.getElementById('forkme_banner').innerText = `Welcome ${username}#${discriminator}`;
storage.setItem('id', uId);
	    storage.setItem('user', `${username}#${discriminator}`);
    }
}
return uId;
  }
	    let id = await checkUser();	
			let memberF = await fetch(`http://v7.altertrail.com:69/api/getMember?id=${id}`, {mode: 'cors', method: "GET",  headers: {
      'Content-Type': 'application/json'}})
	    let member = await memberF.json();
	    if (!member) window.location.href = "/denied";
	    console.log(member);
	    let owner = '452455304068726785';
	    let headadmin = '452449880351309826';
	    let admin = '536978643403014178';
	    let headmod = '633408725884862504';
	    let moderator = '452448540946464768';
	    let trainee = '582951367350550529';
	    
	    if (member.roles.includes(trainee)) {
		     document.getElementById('role_banner').innerText = `Trainee`;
	    }
	       if (member.roles.includes(moderator)) {
		     document.getElementById('role_banner').innerText = `Moderator`;
	    }
	        if (member.roles.includes(headmod)) {
		     document.getElementById('role_banner').innerText = `Head Mod`;
	    }
	        if (member.roles.includes(admin)) {
		     document.getElementById('role_banner').innerText = `Administrator`;
	    }
	        if (member.roles.includes(headadmin)) {
		     document.getElementById('role_banner').innerText = `Head Admin`;
	    }
	        if (member.roles.includes(owner)) {
		     document.getElementById('role_banner').innerText = `Owner`;
	    }
	    
	    if(!member.roles.includes(owner) && !member.roles.includes(headadmin) && !member.roles.includes(admin) && !member.roles.includes(headmod) && !member.roles.includes(moderator) && !member.roles.includes(trainee)){
	window.location.href = "/denied";		    
	    return;
	    }
	    
	    document.getElementById('top_nav').innerHtml = `<p><a href="/portal">Home</a> | <a href="/portal/encyclo">Encyclopedia</a> | <a href="/portal/clock">Clock In</a> | <a href="/portal/guide">Guide</a>`
		document.getElementById('info').innerHtml = `<h3>Welcome to the Staff Portal.</h3>
<h6>Above are several links availible to you to help you moderate better and help us make the team the best it can be.</h6>`
		
		if (member.roles.includes(headmod)) {
		document.getElementById('top_nav').innerHtml += ` | <a href="/portal/hm-guide">Head Mod Guide</a> | <a href="http://v7.altertrail.com:69/api/logs">Logs</a> | <a href='/portal/stats'>Stats</a>`
		}
				    
				    
	    

    
}
	</script>

<!-- Javascript -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">soundsworld.ga maintained by OBS</p>
        
      </footer>
    </div>

    
  </body>
</html>
